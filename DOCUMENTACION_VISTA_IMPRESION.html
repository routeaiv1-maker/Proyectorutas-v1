<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Documentaci√≥n T√©cnica - Logistics Dashboard</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 50px;
            color: #334155;
            line-height: 1.7;
        }

        h1 {
            font-size: 2.5em;
            color: #0f172a;
            border-bottom: 3px solid #3b82f6;
            padding-bottom: 15px;
            margin-bottom: 40px;
        }

        h2 {
            font-size: 1.8em;
            color: #1e293b;
            margin-top: 50px;
            border-left: 5px solid #6366f1;
            padding-left: 15px;
            background: #f8fafc;
            padding: 10px 15px;
            border-radius: 0 8px 8px 0;
        }

        h3 {
            font-size: 1.4em;
            color: #475569;
            margin-top: 30px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 5px;
        }

        ul {
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        strong {
            color: #0f172a;
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            color: #d946ef;
        }

        pre {
            background: #1e293b;
            color: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        pre code {
            background: transparent;
            color: inherit;
            padding: 0;
            font-size: 1em;
        }

        .note {
            background: #fff7ed;
            border-left: 4px solid #f97316;
            padding: 15px;
            margin: 20px 0;
            color: #9a3412;
            border-radius: 4px;
        }

        @media print {
            body {
                padding: 0;
                max-width: 100%;
            }

            .no-print {
                display: none;
            }

            h2 {
                page-break-after: avoid;
            }

            pre {
                white-space: pre-wrap;
                word-wrap: break-word;
            }
        }
    </style>
</head>

<body>
    <div class="no-print"
        style="margin-bottom: 20px; padding: 10px; background: #e0f2fe; color: #0284c7; border-radius: 6px; text-align: center;">
        ‚ÑπÔ∏è Para guardar como PDF: Presiona <b>Ctrl + P</b> y selecciona "Guardar como PDF".
    </div>

    <h1>üìò Documentaci√≥n T√©cnica: Logistics Dashboard</h1>
    <p>Este documento detalla la estructura, l√≥gica, tecnolog√≠as y flujos de trabajo del proyecto <b>Logistics
            Dashboard</b>. Dise√±ado para desarrolladores y administradores que deseen entender la profundidad del
        sistema.</p>

    <h2>1. üèóÔ∏è Arquitectura y Stack Tecnol√≥gico</h2>
    <p>El proyecto es una <b>Single Page Application (SPA)</b> moderna construida para velocidad, interactividad y
        facilidad de despliegue.</p>
    <ul>
        <li><b>Frontend Framework:</b> React 18 (construido con Vite para m√°ximo rendimiento).</li>
        <li><b>Lenguaje:</b> JavaScript (ES6+).</li>
        <li><b>Mapas y Georreferenciaci√≥n:</b>
            <ul>
                <li><b>MapLibre GL JS:</b> Motor de renderizado de mapas vectorial (Open Source).</li>
                <li><b>Google Maps API:</b> Proveedor de Tiles (capas visuales), Geocodificaci√≥n y Algoritmos de Tr√°fico
                    (TSP).</li>
            </ul>
        </li>
        <li><b>Inteligencia Artificial:</b> Google Gemini 1.5 Flash (Procesamiento de lenguaje natural).</li>
        <li><b>Enrutamiento y Backend (L√≥gico):</b> wouter, localStorage (Persistencia/Sync) y n8n (Webhooks).</li>
        <li><b>Estilos:</b> CSS Modules + JSS.</li>
    </ul>

    <h2>2. üìÇ Estructura del Proyecto</h2>
    <pre>
logistics-dashboard/
‚îú‚îÄ‚îÄ .env                  # Variables de entorno
‚îú‚îÄ‚îÄ index.html            # Punto de entrada HTML
‚îú‚îÄ‚îÄ vercel.json           # Configuraci√≥n de despliegue
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx           # Enrutador principal
‚îÇ   ‚îú‚îÄ‚îÄ main.jsx          # Montaje de la aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ components/       # UI Components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminDashboard.jsx  # üß† CEREBRO PRINCIPAL
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.jsx         # Panel lateral
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MapComponent.jsx    # Visualizaci√≥n mapa
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DriverView.jsx      # Vista m√≥vil conductor
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # L√≥gica pura
‚îÇ       ‚îú‚îÄ‚îÄ geminiService.js    # IA
‚îÇ       ‚îú‚îÄ‚îÄ googleDirectionsService.js # L√≥gica de Optimizaci√≥n
</pre>

    <h2>3. üß† L√≥gica Detallada de los M√≥dulos</h2>

    <h3>A. M√≥dulo de Administraci√≥n (AdminDashboard.jsx)</h3>
    <p>Es el componente padre. Su responsabilidad es orquestar el estado global (puntos, configuraci√≥n), escuchar
        eventos de sincronizaci√≥n (<code>storage</code>) e integrarse con n8n.</p>

    <h3>B. M√≥dulo de Mapas (MapComponent.jsx)</h3>
    <p>Contiene l√≥gica visual avanzada: Capas din√°micas para rutas (verde/azul), marcadores interactivos y control de
        zoom inteligente (<code>fitBounds</code> con padding).</p>

    <h3>C. M√≥dulo de Optimizaci√≥n</h3>
    <p>Ofrece 4 estrategias matem√°ticas: <b>Orden Original</b>, <b>Greedy</b> (Vecino m√°s cercano), <b>2-Opt Hybrid</b>
        (Algoritmo gen√©tico) y <b>Google TSP</b> (Optimizaci√≥n profesional con tr√°fico).</p>

    <h3>D. Vista del Conductor (DriverView.jsx)</h3>
    <p>Funciona como una App m√≥vil (PWA). Es 'Stateless' (lee datos de URL) y permite navegaci√≥n directa con Waze/Maps.
        Al marcar entregas, sincroniza v√≠a localStorage.</p>

    <h2>4. ü§ñ Flujo de la Inteligencia Artificial (Gemini)</h2>
    <p>El sistema usa un "System Prompt" en <code>geminiService.js</code>. Convierte lenguaje natural ("ir a la calle
        80...") en un array JSON estructurado de coordenadas que el mapa puede entender.</p>

    <h2>5. üöÄ Gu√≠a de Uso R√°pida</h2>
    <ol>
        <li><b>Agregar Direcciones:</b> Usa el buscador, el mapa o el chat de IA.</li>
        <li><b>Optimizar:</b> Elige "Inicio Fijo" si es necesario y corre el optimizador.</li>
        <li><b>Asignar:</b> Env√≠a la ruta a un conductor registrado.</li>
        <li><b>Ejecuci√≥n:</b> El conductor navega y marca entregas en su m√≥vil.</li>
    </ol>

    <h2>6. üîß Comandos Desarrollo</h2>
    <ul>
        <li><code>npm run dev</code>: Servidor local.</li>
        <li><code>npm run build</code>: Compilar para producci√≥n.</li>
        <li><code>git push origin main</code>: Desplegar.</li>
    </ul>

    <div class="note">
        <b>Nota de Seguridad:</b> Nunca subir el archivo <code>.env</code> real a repositorios p√∫blicos.
    </div>
</body>

</html>